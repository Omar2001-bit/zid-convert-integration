/*!
 * Convert JS SDK
 * Version 1.0.0
 * Copyright(c) 2020-2022 Convert Insights, Inc
 * License Apache-2.0
 */
"use strict";exports.EventManager=class{constructor(e,{loggerManager:r}={}){this._listeners={},this._deferred={},this._loggerManager=r,this._mapper=(null==e?void 0:e.mapper)||(e=>e)}on(e,r){var t,s;(this._listeners[e]=this._listeners[e]||[]).push(r),null===(s=null===(t=this._loggerManager)||void 0===t?void 0:t.trace)||void 0===s||s.call(t,"EventManager.on()",{event:e}),Object.hasOwnProperty.call(this._deferred,e)&&this.fire(e,this._deferred[e].args,this._deferred[e].err)}removeListeners(e){Object.hasOwnProperty.call(this._listeners,e)&&delete this._listeners[e],Object.hasOwnProperty.call(this._deferred,e)&&delete this._deferred[e]}fire(e,r=null,t=null,s=!1){var l,i,a,n;null===(i=null===(l=this._loggerManager)||void 0===l?void 0:l.debug)||void 0===i||i.call(l,"EventManager.fire()",this._mapper({event:e,args:r,err:t,deferred:s}));for(const s of this._listeners[e]||[])if(Object.hasOwnProperty.call(this._listeners,e)&&"function"==typeof s)try{s.apply(null,[this._mapper(r),t])}catch(e){null===(n=null===(a=this._loggerManager)||void 0===a?void 0:a.error)||void 0===n||n.call(a,"EventManager.fire()",e)}s&&!Object.hasOwnProperty.call(this._deferred,e)&&(this._deferred[e]={args:r,err:t})}};
//# sourceMappingURL=index.min.js.map
